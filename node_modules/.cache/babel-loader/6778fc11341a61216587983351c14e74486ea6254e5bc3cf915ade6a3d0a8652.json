{"ast":null,"code":"import _objectSpread from\"/Users/user/Desktop/NEW-Green-Field_BU/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/user/Desktop/NEW-Green-Field_BU/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/user/Desktop/NEW-Green-Field_BU/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/user/Desktop/NEW-Green-Field_BU/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";/* eslint-disable react-hooks/exhaustive-deps */import React,{useContext,useEffect,useState}from\"react\";import\"./Header.css\";import SearchIcon from\"@mui/icons-material/Search\";import TuneIcon from\"@mui/icons-material/Tune\";import SyncAltIcon from\"@mui/icons-material/SyncAlt\";import{VariableContext}from\"../App\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Header(){var _useState=useState({fil:\"\",order:\"desc\",keyWord:\"\"}),_useState2=_slicedToArray(_useState,2),condition=_useState2[0],setCondition=_useState2[1];var _useContext=useContext(VariableContext),_useContext2=_slicedToArray(_useContext,5),setPopup=_useContext2[1],setPostedArray=_useContext2[3],tagArray=_useContext2[4];useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var fetchData,key,data,newData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"http://localhost:3333/posted\").then(function(e){return e.json();});case 2:fetchData=_context.sent;key=new RegExp(condition.keyWord.toLocaleLowerCase());data=fetchData.filter(function(e){return key.test(e.title.toLocaleLowerCase())||key.test(e.tag.toLocaleLowerCase());});if(condition.fil!==\"\"){newData=data.filter(function(e){return e.tag===condition.fil;});condition.order===\"asc\"&&newData.reverse();setPostedArray(newData);}else{condition.order===\"asc\"&&data.reverse();setPostedArray(data);}case 6:case\"end\":return _context.stop();}},_callee);}))();},[condition]);return/*#__PURE__*/_jsxs(\"header\",{children:[/*#__PURE__*/_jsxs(\"section\",{className:\"search\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"search\",placeholder:\"You can get keyphrase!\",value:condition.keyWord,onChange:function onChange(e){return setCondition(_objectSpread(_objectSpread({},condition),{},{keyWord:e.currentTarget.value}));}}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){},children:/*#__PURE__*/_jsx(SearchIcon,{})})]}),/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"filterIcon\",children:/*#__PURE__*/_jsx(TuneIcon,{})}),/*#__PURE__*/_jsxs(\"select\",{id:\"fil\",onChange:function onChange(e){return setCondition(_objectSpread(_objectSpread({},condition),{},{fil:e.currentTarget.value}));},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- select --\"}),tagArray.map(function(e,ind){return/*#__PURE__*/_jsx(\"option\",{value:e,children:e},ind);})]}),/*#__PURE__*/_jsx(\"label\",{className:\"orderIcon\",children:/*#__PURE__*/_jsx(SyncAltIcon,{})}),/*#__PURE__*/_jsxs(\"select\",{name:\"oreder\",id:\"order\",onChange:function onChange(e){return setCondition(_objectSpread(_objectSpread({},condition),{},{order:e.currentTarget.value}));},children:[/*#__PURE__*/_jsx(\"option\",{value:\"desc\",children:\"desc\"}),/*#__PURE__*/_jsx(\"option\",{value:\"asc\",children:\"asc\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){setPopup(true);},children:/*#__PURE__*/_jsx(\"label\",{children:/*#__PURE__*/_jsx(\"span\",{children:\"\\u2795\"})})})]})]});}//a","map":{"version":3,"names":["React","useContext","useEffect","useState","SearchIcon","TuneIcon","SyncAltIcon","VariableContext","jsx","_jsx","jsxs","_jsxs","Header","_useState","fil","order","keyWord","_useState2","_slicedToArray","condition","setCondition","_useContext","_useContext2","setPopup","setPostedArray","tagArray","_asyncToGenerator","_regeneratorRuntime","mark","_callee","fetchData","key","data","newData","wrap","_callee$","_context","prev","next","fetch","then","e","json","sent","RegExp","toLocaleLowerCase","filter","test","title","tag","reverse","stop","children","className","type","placeholder","value","onChange","_objectSpread","currentTarget","onClick","id","map","ind","name"],"sources":["/Users/user/Desktop/NEW-Green-Field_BU/src/components/Header.tsx"],"sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useContext, useEffect, useState } from \"react\";\nimport \"./Header.css\";\nimport SearchIcon from \"@mui/icons-material/Search\";\nimport TuneIcon from \"@mui/icons-material/Tune\";\nimport SyncAltIcon from \"@mui/icons-material/SyncAlt\";\nimport { VariableContext } from \"../App\";\n\nexport default function Header() {\n  const [condition, setCondition] = useState({\n    fil: \"\",\n    order: \"desc\",\n    keyWord: \"\",\n  });\n  const [, setPopup, , setPostedArray, tagArray] = useContext(VariableContext);\n\n  useEffect(() => {\n    (async () => {\n      const fetchData = await fetch(\"http://localhost:3333/posted\").then((e) =>\n        e.json()\n      );\n      const key = new RegExp(condition.keyWord.toLocaleLowerCase());\n      const data = fetchData.filter(\n        (e: any) =>\n          key.test(e.title.toLocaleLowerCase()) ||\n          key.test(e.tag.toLocaleLowerCase())\n      );\n      if (condition.fil !== \"\") {\n        const newData = data.filter(\n          (e: { tag: string }) => e.tag === condition.fil\n        );\n        condition.order === \"asc\" && newData.reverse();\n        setPostedArray(newData);\n      } else {\n        condition.order === \"asc\" && data.reverse();\n        setPostedArray(data);\n      }\n    })();\n  }, [condition]);\n\n  return (\n    <header>\n      {/* 検索窓 */}\n      <section className=\"search\">\n        <input\n          type=\"search\"\n          placeholder=\"You can get keyphrase!\"\n          value={condition.keyWord}\n          onChange={(e) =>\n            setCondition({ ...condition, keyWord: e.currentTarget.value })\n          }\n        />\n        <button onClick={(e) => {}}>\n          <SearchIcon />\n        </button>\n      </section>\n\n      {/* タグ選択 */}\n      <section>\n        <label className=\"filterIcon\">\n          <TuneIcon />\n        </label>\n        <select\n          id=\"fil\"\n          onChange={(e) =>\n            setCondition({ ...condition, fil: e.currentTarget.value })\n          }\n        >\n          <option value=\"\">-- select --</option>\n          {tagArray.map((e, ind) => (\n            <option key={ind} value={e}>\n              {e}\n            </option>\n          ))}\n        </select>\n\n        {/* ソート */}\n        <label className=\"orderIcon\">\n          <SyncAltIcon />\n        </label>\n        <select\n          name=\"oreder\"\n          id=\"order\"\n          onChange={(e) =>\n            setCondition({ ...condition, order: e.currentTarget.value })\n          }\n        >\n          <option value=\"desc\">desc</option>\n          <option value=\"asc\">asc</option>\n        </select>\n\n        {/* 記事追加 */}\n        <button\n          onClick={() => {\n            setPopup(true);\n          }}\n        >\n          <label>\n            <span>➕</span>\n          </label>\n        </button>\n      </section>\n    </header>\n  );\n}\n\n//a\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}