{"ast":null,"code":"var _jsxFileName = \"/Users/user/BTC/soro_project_dig_btc_kikuchi\\u306E\\u30B3\\u30D2\\u309A\\u30FC/src/components/Add.tsx\",\n  _s = $RefreshSig$();\nimport React, { useContext, useEffect, useState } from \"react\";\nimport { VariableContext } from \"../App\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst fetchURL = process.env.NODE_ENV === \"production\" ? \"https://kjk.onrender.com\" : \"http://localhost:3333\";\nexport const Add = () => {\n  _s();\n  const [inputNewItem, setInputNewItem] = useState({\n    item: \"\",\n    quantity: 1,\n    quantity_unit: \"個/本/玉\"\n  });\n  const [,, lists, setLists] = useContext(VariableContext);\n  const [submitFlag, setSubmitFlag] = useState(false);\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setInputNewItem({\n      ...inputNewItem,\n      [name]: value\n    });\n  };\n  const handleSubmit = e => {\n    //ページのリロード処理を無効化\n    e.preventDefault();\n    if (!inputNewItem) return;\n    setLists(lists => [...lists, {\n      uniquKey: uuidv4(),\n      item: inputNewItem.item,\n      isCompleted: false,\n      corner_name: \"選択してください\",\n      directions: 1,\n      quantity: inputNewItem.quantity,\n      quantity_unit: inputNewItem[\"quantity_unit\"]\n    }]);\n    setInputNewItem({\n      item: \"\",\n      quantity: 1,\n      quantity_unit: \"個/本/玉\"\n    });\n  };\n  //登録\n  useEffect(() => {\n    const getData = async () => {\n      await fetch(fetchURL + \"/lists\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(lists.slice(-1)[0])\n      }).then(e => e.json());\n    };\n    if (submitFlag) {\n      getData();\n      setSubmitFlag(false);\n    }\n  }, [lists]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      id: \"add\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"item\",\n        value: inputNewItem[\"item\"],\n        placeholder: \"\\u65B0\\u3057\\u304F\\u8CB7\\u3046\\u7269\",\n        onChange: e => handleChange(e),\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"\\u91CF\\uFF1A\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        name: \"quantity\",\n        type: \"number\",\n        min: 0,\n        value: inputNewItem[\"quantity\"],\n        placeholder: \"\\u91CF\",\n        onChange: e => handleChange(e),\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"\\u5358\\u4F4D\",\n        children: \"\\u5358\\u4F4D\\uFF1A\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        form: \"add\",\n        name: \"quantity_unit\",\n        onChange: e => handleChange(e),\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\\u500B/\\u672C/\\u7389\",\n          children: \"\\u500B/\\u672C/\\u7389\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\\u30D1\\u30C3\\u30AF/\\u888B/\\u7F36\",\n          children: \"\\u30D1\\u30C3\\u30AF/\\u888B/\\u7F36\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"L\",\n          children: \"L\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"Kg\",\n          children: \"Kg\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        onClick: () => setSubmitFlag(true),\n        children: \"\\u8FFD\\u52A0!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n_s(Add, \"1PEA+bwNZ0aMuwtutsnCkqTbkwc=\");\n_c = Add;\nvar _c;\n$RefreshReg$(_c, \"Add\");","map":{"version":3,"names":["React","useContext","useEffect","useState","VariableContext","v4","uuidv4","jsxDEV","_jsxDEV","Fragment","_Fragment","fetchURL","process","env","NODE_ENV","Add","_s","inputNewItem","setInputNewItem","item","quantity","quantity_unit","lists","setLists","submitFlag","setSubmitFlag","handleChange","e","name","value","target","handleSubmit","preventDefault","uniquKey","isCompleted","corner_name","directions","getData","fetch","method","headers","body","JSON","stringify","slice","then","json","children","onSubmit","id","type","placeholder","onChange","required","fileName","_jsxFileName","lineNumber","columnNumber","min","htmlFor","form","onClick","_c","$RefreshReg$"],"sources":["/Users/user/BTC/soro_project_dig_btc_kikuchiのコピー/src/components/Add.tsx"],"sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\nimport { VariableContext } from \"../App\";\nimport { v4 as uuidv4 } from \"uuid\";\n\nconst fetchURL =\n  process.env.NODE_ENV === \"production\"\n    ? \"https://kjk.onrender.com\"\n    : \"http://localhost:3333\";\n\nexport const Add = () => {\n  const [inputNewItem, setInputNewItem] = useState({\n    item: \"\",\n    quantity: 1,\n    quantity_unit: \"個/本/玉\",\n  });\n  const [, , lists, setLists] = useContext(VariableContext);\n  const [submitFlag, setSubmitFlag] = useState(false);\n\n  const handleChange = (\n    e:\n      | React.ChangeEvent<HTMLInputElement>\n      | React.ChangeEvent<HTMLSelectElement>\n  ) => {\n    const { name, value } = e.target;\n    setInputNewItem({ ...inputNewItem, [name]: value });\n  };\n\n  const handleSubmit = (e: { preventDefault: () => void }) => {\n    //ページのリロード処理を無効化\n    e.preventDefault();\n    if (!inputNewItem) return;\n    setLists((lists: any) => [\n      ...lists,\n      {\n        uniquKey: uuidv4(),\n        item: inputNewItem.item,\n        isCompleted: false,\n        corner_name: \"選択してください\",\n        directions: 1,\n        quantity: inputNewItem.quantity,\n        quantity_unit: inputNewItem[\"quantity_unit\"],\n      },\n    ]);\n    setInputNewItem({\n      item: \"\",\n      quantity: 1,\n      quantity_unit: \"個/本/玉\",\n    });\n  };\n  //登録\n  useEffect(() => {\n    const getData = async () => {\n      await fetch(fetchURL + \"/lists\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(lists.slice(-1)[0]),\n      }).then((e) => e.json());\n    };\n    if (submitFlag) {\n      getData();\n      setSubmitFlag(false);\n    }\n  }, [lists]);\n\n  return (\n    <>\n      <form onSubmit={handleSubmit} id=\"add\">\n        <input\n          type=\"text\"\n          name=\"item\"\n          value={inputNewItem[\"item\"]}\n          placeholder=\"新しく買う物\"\n          onChange={(e) => handleChange(e)}\n          required\n        />\n        <label>量：</label>\n        <input\n          name=\"quantity\"\n          type=\"number\"\n          min={0}\n          value={inputNewItem[\"quantity\"]}\n          placeholder=\"量\"\n          onChange={(e) => handleChange(e)}\n          required\n        />\n\n        <label htmlFor=\"単位\">単位：</label>\n        <select\n          form=\"add\"\n          name=\"quantity_unit\"\n          onChange={(e) => handleChange(e)}\n        >\n          <option value=\"個/本/玉\">個/本/玉</option>\n          <option value=\"パック/袋/缶\">パック/袋/缶</option>\n          <option value=\"L\">L</option>\n          <option value=\"Kg\">Kg</option>\n        </select>\n        <button type=\"submit\" onClick={() => setSubmitFlag(true)}>\n          追加!\n        </button>\n      </form>\n    </>\n  );\n};\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,UAAU,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC9D,SAASC,eAAe,QAAQ,QAAQ;AACxC,SAASC,EAAE,IAAIC,MAAM,QAAQ,MAAM;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAEpC,MAAMC,QAAQ,GACZC,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,YAAY,GACjC,0BAA0B,GAC1B,uBAAuB;AAE7B,OAAO,MAAMC,GAAG,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACvB,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAGf,QAAQ,CAAC;IAC/CgB,IAAI,EAAE,EAAE;IACRC,QAAQ,EAAE,CAAC;IACXC,aAAa,EAAE;EACjB,CAAC,CAAC;EACF,MAAM,IAAKC,KAAK,EAAEC,QAAQ,CAAC,GAAGtB,UAAU,CAACG,eAAe,CAAC;EACzD,MAAM,CAACoB,UAAU,EAAEC,aAAa,CAAC,GAAGtB,QAAQ,CAAC,KAAK,CAAC;EAEnD,MAAMuB,YAAY,GAChBC,CAEwC,IACrC;IACH,MAAM;MAAEC,IAAI;MAAEC;IAAM,CAAC,GAAGF,CAAC,CAACG,MAAM;IAChCZ,eAAe,CAAC;MAAE,GAAGD,YAAY;MAAE,CAACW,IAAI,GAAGC;IAAM,CAAC,CAAC;EACrD,CAAC;EAED,MAAME,YAAY,GAAIJ,CAAiC,IAAK;IAC1D;IACAA,CAAC,CAACK,cAAc,CAAC,CAAC;IAClB,IAAI,CAACf,YAAY,EAAE;IACnBM,QAAQ,CAAED,KAAU,IAAK,CACvB,GAAGA,KAAK,EACR;MACEW,QAAQ,EAAE3B,MAAM,CAAC,CAAC;MAClBa,IAAI,EAAEF,YAAY,CAACE,IAAI;MACvBe,WAAW,EAAE,KAAK;MAClBC,WAAW,EAAE,UAAU;MACvBC,UAAU,EAAE,CAAC;MACbhB,QAAQ,EAAEH,YAAY,CAACG,QAAQ;MAC/BC,aAAa,EAAEJ,YAAY,CAAC,eAAe;IAC7C,CAAC,CACF,CAAC;IACFC,eAAe,CAAC;MACdC,IAAI,EAAE,EAAE;MACRC,QAAQ,EAAE,CAAC;MACXC,aAAa,EAAE;IACjB,CAAC,CAAC;EACJ,CAAC;EACD;EACAnB,SAAS,CAAC,MAAM;IACd,MAAMmC,OAAO,GAAG,MAAAA,CAAA,KAAY;MAC1B,MAAMC,KAAK,CAAC3B,QAAQ,GAAG,QAAQ,EAAE;QAC/B4B,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UAAE,cAAc,EAAE;QAAmB,CAAC;QAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACrB,KAAK,CAACsB,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACzC,CAAC,CAAC,CAACC,IAAI,CAAElB,CAAC,IAAKA,CAAC,CAACmB,IAAI,CAAC,CAAC,CAAC;IAC1B,CAAC;IACD,IAAItB,UAAU,EAAE;MACda,OAAO,CAAC,CAAC;MACTZ,aAAa,CAAC,KAAK,CAAC;IACtB;EACF,CAAC,EAAE,CAACH,KAAK,CAAC,CAAC;EAEX,oBACEd,OAAA,CAAAE,SAAA;IAAAqC,QAAA,eACEvC,OAAA;MAAMwC,QAAQ,EAAEjB,YAAa;MAACkB,EAAE,EAAC,KAAK;MAAAF,QAAA,gBACpCvC,OAAA;QACE0C,IAAI,EAAC,MAAM;QACXtB,IAAI,EAAC,MAAM;QACXC,KAAK,EAAEZ,YAAY,CAAC,MAAM,CAAE;QAC5BkC,WAAW,EAAC,sCAAQ;QACpBC,QAAQ,EAAGzB,CAAC,IAAKD,YAAY,CAACC,CAAC,CAAE;QACjC0B,QAAQ;MAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACT,CAAC,eACFjD,OAAA;QAAAuC,QAAA,EAAO;MAAE;QAAAO,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eACjBjD,OAAA;QACEoB,IAAI,EAAC,UAAU;QACfsB,IAAI,EAAC,QAAQ;QACbQ,GAAG,EAAE,CAAE;QACP7B,KAAK,EAAEZ,YAAY,CAAC,UAAU,CAAE;QAChCkC,WAAW,EAAC,QAAG;QACfC,QAAQ,EAAGzB,CAAC,IAAKD,YAAY,CAACC,CAAC,CAAE;QACjC0B,QAAQ;MAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACT,CAAC,eAEFjD,OAAA;QAAOmD,OAAO,EAAC,cAAI;QAAAZ,QAAA,EAAC;MAAG;QAAAO,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eAC/BjD,OAAA;QACEoD,IAAI,EAAC,KAAK;QACVhC,IAAI,EAAC,eAAe;QACpBwB,QAAQ,EAAGzB,CAAC,IAAKD,YAAY,CAACC,CAAC,CAAE;QAAAoB,QAAA,gBAEjCvC,OAAA;UAAQqB,KAAK,EAAC,sBAAO;UAAAkB,QAAA,EAAC;QAAK;UAAAO,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACpCjD,OAAA;UAAQqB,KAAK,EAAC,kCAAS;UAAAkB,QAAA,EAAC;QAAO;UAAAO,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACxCjD,OAAA;UAAQqB,KAAK,EAAC,GAAG;UAAAkB,QAAA,EAAC;QAAC;UAAAO,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eAC5BjD,OAAA;UAAQqB,KAAK,EAAC,IAAI;UAAAkB,QAAA,EAAC;QAAE;UAAAO,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACxB,CAAC,eACTjD,OAAA;QAAQ0C,IAAI,EAAC,QAAQ;QAACW,OAAO,EAAEA,CAAA,KAAMpC,aAAa,CAAC,IAAI,CAAE;QAAAsB,QAAA,EAAC;MAE1D;QAAAO,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL;EAAC,gBACP,CAAC;AAEP,CAAC;AAACzC,EAAA,CA9FWD,GAAG;AAAA+C,EAAA,GAAH/C,GAAG;AAAA,IAAA+C,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}